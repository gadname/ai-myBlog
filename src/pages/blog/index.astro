---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getBlogs } from '../../lib/microcms';
import FormattedDate from '../../components/FormattedDate.astro';

// microCMSからブログ記事を取得
const response = await getBlogs({
	limit: 100,
	orders: '-publishedAt'
});
const posts = response.contents;
---

<!doctype html>
<html lang="ja">
	<head>
		<BaseHead title={`Articles | ${SITE_TITLE}`} description={SITE_DESCRIPTION} />
		<style>
			/* Page Header - Minimal & Elegant */
			.page-header {
				text-align: center;
				padding: var(--space-4xl) var(--space-xl) var(--space-3xl);
				background: var(--bg-primary);
				position: relative;
				overflow: hidden;
			}
			
			.page-header::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: 
					radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.04) 0%, transparent 40%),
					radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.03) 0%, transparent 40%),
					radial-gradient(circle at 50% 80%, rgba(244, 114, 182, 0.02) 0%, transparent 40%);
				animation: float 30s ease-in-out infinite;
			}

			.page-title {
				font-size: clamp(3rem, 8vw, 4.5rem);
				margin-bottom: var(--space-md);
				position: relative;
				z-index: 1;
				background: var(--primary-gradient);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
				background-size: 200% 200%;
				animation: gradient 5s ease infinite;
				font-weight: 900;
				letter-spacing: -0.03em;
			}

			.page-description {
				font-size: var(--font-size-xl);
				color: var(--text-secondary);
				max-width: var(--max-width-2xl);
				margin: 0 auto;
				position: relative;
				z-index: 1;
				opacity: 0.8;
			}

			/* Blog Grid - Magazine Layout */
			.blog-container {
				max-width: var(--max-width-7xl);
				margin: 0 auto;
				padding: var(--space-3xl) var(--space-xl);
			}

			.blog-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
				gap: var(--space-2xl);
				list-style: none;
				margin: 0;
				padding: 0;
			}

			/* Featured Post - Hero Style */
			.featured-post {
				grid-column: 1 / -1;
				margin-bottom: var(--space-2xl);
			}

			.featured-card {
				display: grid;
				grid-template-columns: 1.2fr 1fr;
				gap: var(--space-3xl);
				align-items: center;
				background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(var(--gray-100), 0.5) 100%);
				backdrop-filter: blur(20px);
				border-radius: var(--radius-2xl);
				overflow: hidden;
				transition: all var(--transition-slow);
				text-decoration: none;
				border: 1px solid rgba(var(--gray-200), 0.2);
				position: relative;
				padding: var(--space-2xl);
			}
			
			.featured-card::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: var(--primary-gradient);
				opacity: 0;
				transition: opacity var(--transition-base);
			}

			.featured-card:hover {
				transform: translateY(-10px);
				box-shadow: 
					0 30px 60px rgba(0, 0, 0, 0.12),
					0 0 0 1px rgba(99, 102, 241, 0.1);
				border-color: rgba(99, 102, 241, 0.2);
			}
			
			.featured-card:hover::before {
				opacity: 0.02;
			}

			.featured-image {
				aspect-ratio: 16 / 10;
				overflow: hidden;
				border-radius: var(--radius-xl);
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
			}

			.featured-image img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				transition: all var(--transition-slow);
			}

			.featured-card:hover .featured-image img {
				transform: scale(1.08);
				filter: brightness(1.05) contrast(1.1);
			}

			.featured-content {
				padding: var(--space-xl);
			}

			.featured-label {
				display: inline-block;
				padding: var(--space-xs) var(--space-lg);
				background: var(--primary-gradient);
				color: rgb(var(--white));
				font-size: var(--font-size-sm);
				font-weight: 700;
				border-radius: var(--radius-full);
				margin-bottom: var(--space-lg);
				text-transform: uppercase;
				letter-spacing: 0.1em;
				box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
				animation: pulse 2s ease-in-out infinite;
			}

			.featured-title {
				font-size: clamp(var(--font-size-3xl), 4vw, var(--font-size-4xl));
				margin-bottom: var(--space-lg);
				color: var(--text-primary);
				line-height: var(--line-height-tight);
				font-weight: 800;
				letter-spacing: -0.02em;
			}

			.featured-excerpt {
				font-size: var(--font-size-lg);
				color: var(--text-secondary);
				margin-bottom: var(--space-xl);
				line-height: var(--line-height-relaxed);
				opacity: 0.8;
			}

			.featured-meta {
				display: flex;
				align-items: center;
				gap: var(--space-md);
				color: var(--text-muted);
				font-size: var(--font-size-base);
				font-weight: 500;
			}

			/* Regular Blog Cards - Premium Design */
			.blog-card {
				background: rgba(255, 255, 255, 0.8);
				backdrop-filter: blur(10px);
				border-radius: var(--radius-xl);
				overflow: hidden;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
				transition: all var(--transition-slow);
				text-decoration: none;
				display: flex;
				flex-direction: column;
				height: 100%;
				border: 1px solid rgba(var(--gray-200), 0.2);
				position: relative;
				group: true;
			}
			
			.blog-card::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: linear-gradient(180deg, transparent 60%, rgba(99, 102, 241, 0.03) 100%);
				opacity: 0;
				transition: opacity var(--transition-base);
				z-index: 1;
			}

			.blog-card:hover {
				transform: translateY(-10px) scale(1.02);
				box-shadow: 
					0 30px 60px rgba(0, 0, 0, 0.15),
					0 0 0 1px rgba(99, 102, 241, 0.1);
				border-color: rgba(99, 102, 241, 0.2);
			}
			
			.blog-card:hover::before {
				opacity: 1;
			}

			.blog-card:hover .card-image img {
				transform: scale(1.1);
				filter: brightness(1.1) saturate(1.1);
			}

			.card-image {
				aspect-ratio: 16 / 9;
				overflow: hidden;
				background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
				position: relative;
				z-index: 2;
			}

			.card-image img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				transition: all var(--transition-slow);
			}

			.card-content {
				padding: var(--space-xl);
				flex-grow: 1;
				display: flex;
				flex-direction: column;
				position: relative;
				z-index: 2;
			}

			.card-category {
				display: inline-block;
				padding: var(--space-xs) var(--space-md);
				background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
				color: var(--primary);
				font-size: var(--font-size-xs);
				font-weight: 700;
				border-radius: var(--radius-full);
				margin-bottom: var(--space-md);
				text-transform: uppercase;
				letter-spacing: 0.08em;
				border: 1px solid rgba(99, 102, 241, 0.2);
				transition: all var(--transition-base);
			}
			
			.blog-card:hover .card-category {
				background: var(--primary-gradient);
				color: rgb(var(--white));
				border-color: transparent;
			}

			.card-title {
				font-size: var(--font-size-xl);
				margin-bottom: var(--space-md);
				color: var(--text-primary);
				line-height: var(--line-height-snug);
				flex-grow: 1;
				font-weight: 700;
				letter-spacing: -0.01em;
				transition: color var(--transition-base);
			}
			
			.blog-card:hover .card-title {
				color: var(--primary);
			}

			.card-meta {
				display: flex;
				align-items: center;
				gap: var(--space-sm);
				color: var(--text-muted);
				font-size: var(--font-size-sm);
				font-weight: 500;
			}

			.meta-divider {
				width: 4px;
				height: 4px;
				background-color: var(--text-muted);
				border-radius: var(--radius-full);
				opacity: 0.5;
			}

			/* Empty State - Elegant */
			.empty-state {
				text-align: center;
				padding: var(--space-4xl);
				max-width: var(--max-width-2xl);
				margin: 0 auto;
			}

			.empty-icon {
				width: 120px;
				height: 120px;
				margin: 0 auto var(--space-xl);
				display: flex;
				align-items: center;
				justify-content: center;
				background: var(--primary-gradient);
				border-radius: var(--radius-full);
				color: rgb(var(--white));
				font-size: var(--font-size-4xl);
				box-shadow: 0 20px 40px rgba(99, 102, 241, 0.3);
			}

			.empty-title {
				font-size: var(--font-size-2xl);
				color: var(--text-primary);
				margin-bottom: var(--space-md);
				font-weight: 700;
			}

			.empty-description {
				color: var(--text-secondary);
				font-size: var(--font-size-lg);
				line-height: var(--line-height-relaxed);
			}

			/* Responsive */
			@media (max-width: 1024px) {
				.featured-card {
					grid-template-columns: 1fr;
					padding: 0;
				}

				.featured-content {
					padding: var(--space-2xl);
				}
				
				.featured-image {
					aspect-ratio: 16 / 12;
				}
			}

			@media (max-width: 768px) {
				.blog-grid {
					grid-template-columns: 1fr;
					gap: var(--space-xl);
				}

				.featured-post {
					margin-bottom: var(--space-xl);
				}
				
				.page-title {
					font-size: clamp(2.5rem, 10vw, 3.5rem);
				}
			}

			/* Animations */
			@keyframes float {
				0%, 100% {
					transform: translate(0, 0) rotate(0deg);
				}
				33% {
					transform: translate(30px, -30px) rotate(120deg);
				}
				66% {
					transform: translate(-20px, 20px) rotate(240deg);
				}
			}
			
			@keyframes gradient {
				0% {
					background-position: 0% 50%;
				}
				50% {
					background-position: 100% 50%;
				}
				100% {
					background-position: 0% 50%;
				}
			}
		</style>
	</head>
	<body>
		<Header />
		
		<!-- Page Header -->
		<div class="page-header">
			<h1 class="page-title animate-fadeIn">ブログ記事</h1>
			<p class="page-description animate-fadeIn">
				テクノロジー、デザイン、イノベーションの交差点を探求する
			</p>
		</div>

		<!-- Blog Content -->
		<main class="blog-container">
			{posts.length > 0 ? (
				<ul class="blog-grid">
					{posts.map((post, index) => {
						if (index === 0) {
							return (
								<li class="featured-post">
									<a href={`/blog/${post.slug}/`} class="featured-card">
										{post.heroImage && (
											<div class="featured-image">
												<img
													width={800}
													height={500}
													src={post.heroImage.url + '?w=800&h=500&fit=crop'}
													alt={post.title}
												/>
											</div>
										)}
										<div class="featured-content">
											<span class="featured-label">注目の記事</span>
											<h2 class="featured-title">{post.title}</h2>
											{post.description && (
												<p class="featured-excerpt">{post.description}</p>
											)}
											<div class="featured-meta">
												<FormattedDate date={new Date(post.publishedAt)} />
												{post.category && (
													<>
														<span class="meta-divider"></span>
														<span>{post.category.name}</span>
													</>
												)}
											</div>
										</div>
									</a>
								</li>
							);
						}
						return (
							<li>
								<a href={`/blog/${post.slug}/`} class="blog-card">
									{post.heroImage && (
										<div class="card-image">
											<img
												width={400}
												height={225}
												src={post.heroImage.url + '?w=400&h=225&fit=crop'}
												alt={post.title}
												loading="lazy"
											/>
										</div>
									)}
									<div class="card-content">
										{post.category && (
											<span class="card-category">{post.category.name}</span>
										)}
										<h3 class="card-title">{post.title}</h3>
										<div class="card-meta">
											<FormattedDate date={new Date(post.publishedAt)} />
										</div>
									</div>
								</a>
							</li>
						);
					})}
				</ul>
			) : (
				<div class="empty-state">
					<div class="empty-icon">
						<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="60" height="60">
							<path d="M12 2L3 7V12C3 16.5 6.84 20.74 12 22C17.16 20.74 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M12 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
							<path d="M12 7H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
						</svg>
					</div>
					<h2 class="empty-title">コンテンツは近日公開</h2>
					<p class="empty-description">
						素晴らしい記事を準備中です。新しい洞察やストーリーをお楽しみに。
					</p>
				</div>
			)}
		</main>
		
		<Footer />
	</body>
</html>