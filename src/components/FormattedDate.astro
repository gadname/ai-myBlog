---
interface Props {
	date: Date | string;
}

const { date } = Astro.props;

// 日付を安全にDateオブジェクトに変換
const safeDate = (() => {
	if (!date) return new Date();
	
	if (date instanceof Date) {
		return isNaN(date.getTime()) ? new Date() : date;
	}
	
	if (typeof date === 'string') {
		const parsedDate = new Date(date);
		return isNaN(parsedDate.getTime()) ? new Date() : parsedDate;
	}
	
	return new Date();
})();
---

<time datetime={safeDate.toISOString()}>
	{
		safeDate.toLocaleDateString('ja-JP', {
			year: 'numeric',
			month: 'long',
			day: 'numeric',
		})
	}
</time>
